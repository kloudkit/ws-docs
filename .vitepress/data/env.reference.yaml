---
############################# Environment Variables ############################
#
# Purpose:
#   Canonical reference for every `WS_*` environment variable recognized by
#   **Kloud Workspace**.
#
# The file is used in:
#   - Automated tests
#   - Documentation builds
#   - Startup scripts
#
# Naming rules:
#   - Live variables use the section-prefixed form `WS_<GROUP>_<NAME>`
#   - Historical aliases live under `deprecated:` with:
#
################################################################################

envs:
  apt:
    name: APT
    properties:
      additional_debian_repos:
        type: string
        default: null
        reference: /tools/apt
        example: >-
          deb http://one.test bookworm main; deb http://two.test bookworm main
        description: Appends additional repository lines to `/etc/apt/sources.list`.
        longDescription: |
          Accepts a **semicolon-delimited** list of full `deb` entries.

          Each entry is copied as is, you're responsible for correct suite
          *(`bookworm`)* and component names *(`main`, `contrib`, ...)*.

      additional_gpg_keys:
        type: string
        default: null
        reference: /tools/apt
        example: >-
          name1:keys.example.com/key1.asc name2:keys.example.com/key2.gpg
        description: List of trusted gpg pairs.
        longDescription: |
          Accepts a **space-delimited** list of `name:url` pairs installed to
          `/etc/apt/keyrings`.

          The key file is downloaded and saved as `/etc/apt/keyrings/<name>.gpg`.
          If you list more than one URL, separate them with **spaces**.

      additional_packages:
        type: string
        default: null
        reference: /tools/apt
        example: cmake nano
        description: Additional APT packages installed during startup.
        longDescription: |
          Accepts a **space-delimited** package list.

      disable_additional_repo:
        type: boolean
        default: false
        reference: /tools/apt
        description: Disables the additional third-party repository.
        longDescription: |
          When `true`, `/etc/apt/sources.list.d/additional.sources` is completely
          disabled.

      disable_debian_repo:
        type: boolean
        default: false
        reference: /tools/apt
        description: Disables the default Debian repository.
        longDescription: |
          When `true`, `/etc/apt/sources.list.d/debian.sources` is completely
          disabled.
          This is useful when you rely exclusively on a private mirror.

      update_cache:
        type: boolean
        default: false
        since: 0.0.20
        reference: /tools/apt
        description: Forces `apt-get update` before any package action.

  auth:
    properties:
      disable_sudo:
        type: boolean
        default: false
        since: 0.0.20
        description: Disables password-less `sudo`.

      password:
        type: string
        default: null
        since: 0.0.20
        example: super_duper_secret
        description: Plaintext password for web login.
        reference: /editor/authentication
        longDescription: |
          Use only in ephemeral or local environments, never in shared or
          production deployments.

      password_hashed:
        type: string
        default: null
        since: 0.0.20
        example: >-
          $argon2i$v=19$m=4096,t=3,p=1$...$...
        description: Argon2 hash used for web login.
        reference: /editor/authentication
        longDescription: |
          Takes precedence over plaintext password when both are set.

  ca:
    name: Enterprise CA
    properties:
      additional_cert_allow_insecure:
        type: boolean
        default: false
        since: 0.0.20
        reference: /settings/enterprise-ca
        description: Allows insecure *(non-TLS)* connections to certificates.
        longDescription: |
          Set only in fully trusted network environments such as CI where HTTPS
          termination is impossible.

      additional_cert_endpoints:
        type: string
        default: null
        since: 0.0.20
        reference: /settings/enterprise-ca
        example: http://corp.com/ca.pem http://alt.com/root.crt
        description: URLs of additional CA certificates to trust.
        longDescription: |
          Accepts a **space-delimited** URL list pointing to a PEM-encoded
          certificate.

  docker:
    properties:
      enable_client:
        reference: /tools/docker
        type: boolean
        default: false
        since: 0.0.20
        description: Enables Docker inside the container.

  editor:
    properties:
      additional_vs_extensions:
        type: string
        default: null
        since: 0.0.20
        example: dbaeumer.vscode-eslint esbenp.prettier-vscode
        description: Installs these Marketplace extension IDs at startup.
        longDescription: |
          Accepts a **space-delimited** list of extensions.
        reference: /editor/extensions

      additional_vs_extensions_dir:
        type: string
        default: null
        reference: /editor/extensions
        example: /additional-extensions
        description: Installs `.vsix` file found in this directory.
        longDescription: |
          Use this when you package proprietary or pre-downloaded extensions.

      comments_disable_font:
        type: boolean
        default: false
        since: 0.0.20
        description: Disables the custom font used for code comments.
        reference: /editor/theme-and-fonts

      scrollbar_size:
        type: string
        default: 2px
        since: 0.0.21
        description: Editor's scrollbar size.
        longDescription: |
          You may pass either a bare number *(`6`, becomes `6px`)* or
          the full CSS value with the `px` suffix *(i.e. `6px`)*.

  features:
    properties:
      additional_features:
        reference: /editor/features
        type: string
        default: null
        since: 0.0.20
        example: dotnet jupyter
        description: Installs additional feature at startup.
        longDescription: |
          Accepts a **space-delimited** list of features.

      dir:
        type: string
        default: /usr/share/workspace/features
        reference: /editor/features
        since: 0.20.0
        description: Directory path where additional features are located.
        longDescription: |
          Specify the full path to the directory containing the features
          to be loaded or referenced at startup.

  git:
    reference: /tools/git
    properties:
      clone_repo:
        type: string
        default: null
        since: 0.0.20
        example: https://github.com/example/repo.git
        description: Clones this repository into `${WS_SERVER_ROOT}` at startup.
        longDescription: |
          The clone happens only if the target directory is empty.
          Supports HTTPS and SSH URLs *(requires configured SSH keys)*.

      credential_cache_timeout:
        type: integer
        default: 3600
        description: Lifetime *(seconds)* of cached Git credentials.
        longDescription: |
          Providing a value of `-1` will sech the cache timeout to 1
          year *(31536000 seconds)*.

  helm:
    reference: /tools/helm
    properties:
      preload_cache:
        type: boolean
        default: false
        since: 0.0.20
        description: Restores the Helm repo cache.

  server:
    properties:
      port:
        type: integer
        default: 8080
        since: 0.0.20
        description: Port on which the web server listens.

      proxy_domain:
        type: string
        default: null
        since: 0.0.20
        example: ws.dev
        description: >-
          Domain suffix used to expose server's forwarded ports.
        reference: /editor/port-forwarding

      root_dir:
        type: string
        default: /workspace
        since: 0.0.20
        description: Root directory for the workspace.
        longDescription: |
          **This should only be overridden in extreme cases.**

      ssl_cert:
        type: string
        default: null
        reference: /settings/https
        example: /etc/workspace/ssl/server.crt
        since: 0.0.21
        description: Path or inline PEM for the server certificate.
        longDescription: |
          Accepts either:
          - A full path to the mounted PEM-encoded certificate
          - Literal certificate body starting with `-----BEGIN CERTIFICATE-----`
              *(newline characters may be provided as `\n` escapes)*.

          When this is unset but `WS_SERVER_SSL_KEY` is provided, the
          key is reused to mint a self-signed certificate for
          `WS_SERVER_SSL_HOSTS` *(or `localhost`)*.

      ssl_hosts:
        type: string
        default: localhost
        reference: /settings/https
        example: ws.dev *.ws.dev
        since: 0.0.21
        description: Space delimited DNS names for self-signed certificate.

      ssl_key:
        type: string
        default: null
        reference: /settings/https
        since: 0.0.21
        example: /etc/workspace/ssl/server.key
        description: Path or inline PEM for the private key.

  terminal:
    reference: /editor/terminal
    properties:
      prompt_hide_docker_context:
        type: boolean
        default: false
        since: 0.0.20
        description: Hides Docker context info in the prompt.

      prompt_hide_hostname:
        type: boolean
        default: false
        since: 0.0.20
        description: Hides the container hostname in the prompt.

      prompt_hide_kubernetes_context:
        type: boolean
        default: false
        since: 0.0.20
        description: Hides current Kubernetes context in the prompt.

      prompt_hide_nodejs_version:
        type: boolean
        default: false
        since: 0.0.20
        description: Hides active Node.js version in the prompt.

      prompt_hide_python_version:
        type: boolean
        default: false
        since: 0.0.20
        description: Hides active Python version in the prompt.

      prompt_hide_user:
        type: boolean
        default: false
        since: 0.0.20
        description: Hides the current user in the prompt.

  zsh:
    properties:
      additional_plugins:
        type: string
        default: null
        since: 0.0.20
        example: php
        description: Loads additional `oh-my-zsh` plugins.

      plugins:
        type: string
        default: >-
          1password docker encode64 git golang helm kubectl npm python
          pip ssh-agent yarn zsh-autosuggestions zsh-fzf-history-search
        example: kubectl npm python pip
        description: Enables built-in `oh-my-zsh` plugins.


deprecated:
  WS_APT_UPDATE_REPOS:
    use: WS_APT_UPDATE_CACHE
    since: 0.0.20
    removed: 0.1.0

  WS_CLONE_WORKSPACE_REPO:
    use: WS_GIT_CLONE_REPO
    since: 0.0.20
    removed: 0.1.0

  WS_COMMENTS_DISABLE_FONT:
    use: WS_EDITOR_COMMENTS_DISABLE_FONT
    since: 0.0.20
    removed: 0.1.0

  WS_CONFIGURE_DOCKER:
    use: WS_DOCKER_ENABLE_CLIENT
    since: 0.0.20
    removed: 0.1.0

  WS_CONFIGURE_HELM:
    use: WS_HELM_PRELOAD_CACHE
    since: 0.0.20
    removed: 0.1.0

  WS_DISABLE_SUDO:
    use: WS_AUTH_DISABLE_SUDO
    since: 0.0.20
    removed: 0.1.0

  WS_EXTRA_CA_CERT_ENDPOINTS:
    use: WS_CA_ADDITIONAL_CERT_ENDPOINTS
    since: 0.0.20
    removed: 0.1.0

  WS_EXTRA_CA_CERT_INSECURE:
    use: WS_CA_ADDITIONAL_CERT_ALLOW_INSECURE
    since: 0.0.20
    removed: 0.1.0

  WS_EXTRA_FEATURES:
    use: WS_FEATURES_ADDITIONAL_FEATURES
    since: 0.0.20
    removed: 0.1.0

  WS_EXTRA_VS_EXTENSIONS:
    use: WS_EDITOR_ADDITIONAL_VS_EXTENSIONS
    since: 0.0.20
    removed: 0.1.0

  WS_EXTRA_VS_EXTENSIONS_DIR:
    use: WS_EDITOR_ADDITIONAL_VS_EXTENSIONS_DIR
    since: 0.0.20
    removed: 0.1.0

  WS_PASSWORD:
    use: WS_AUTH_PASSWORD
    since: 0.0.20
    removed: 0.1.0

  WS_PASSWORD_HASHED:
    use: WS_AUTH_PASSWORD_HASHED
    since: 0.0.20
    removed: 0.1.0

  WS_PORT:
    use: WS_SERVER_PORT
    since: 0.0.20
    removed: 0.1.0

  WS_PROMPT_DISABLE_DOCKER:
    use: WS_TERMINAL_PROMPT_HIDE_DOCKER_CONTEXT
    since: 0.0.20
    removed: 0.1.0

  WS_PROMPT_DISABLE_HOSTNAME:
    use: WS_TERMINAL_PROMPT_HIDE_HOSTNAME
    since: 0.0.20
    removed: 0.1.0

  WS_PROMPT_DISABLE_KUBERNETES:
    use: WS_TERMINAL_PROMPT_HIDE_KUBERNETES_CONTEXT
    since: 0.0.20
    removed: 0.1.0

  WS_PROMPT_DISABLE_NODEJS:
    use: WS_TERMINAL_PROMPT_HIDE_NODEJS_VERSION
    since: 0.0.20
    removed: 0.1.0

  WS_PROMPT_DISABLE_PYTHON:
    use: WS_TERMINAL_PROMPT_HIDE_PYTHON_VERSION
    since: 0.0.20
    removed: 0.1.0

  WS_PROMPT_DISABLE_USER:
    use: WS_TERMINAL_PROMPT_HIDE_USER
    since: 0.0.20
    removed: 0.1.0

  WS_PROXY_DOMAIN:
    use: WS_SERVER_PROXY_DOMAIN
    since: 0.0.20
    removed: 0.1.0

  WS_ROOT:
    use: WS_SERVER_ROOT
    since: 0.0.20
    removed: 0.1.0

  WS_ZSH_EXTRA_PLUGINS:
    use: WS_ZSH_ADDITIONAL_PLUGINS
    since: 0.0.20
    removed: 0.1.0
